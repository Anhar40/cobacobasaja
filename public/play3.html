<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">King Bokep | Tonton Video</title>

    <meta property="og:site_name" content="KING BOKEP">
    <meta property="og:type" content="video.other">

    <meta id="ogTitle" property="og:title" content="King Bokep | Tonton Video">
    <meta id="ogUrl" property="og:url" content="">
    <meta id="ogDescription" property="og:description" content="Tonton koleksi video premium terbaru di King Bokep.">
    <meta id="ogImage" property="og:image" content="https://videyindoviral.vercel.app/logo1.png">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="King Bokep | Tonton Video">
    <meta name="twitter:description" content="Tonton koleksi video premium terbaru di King Bokep.">
    <meta name="twitter:image" content="https://videyindoviral.vercel.app/logo1.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-dark': '#121212',
                        'card-dark': '#1E1E1E',
                        'accent': '#6366F1', // Indigo
                    },
                    boxShadow: {
                        '3xl': '0 35px 60px -15px rgba(0, 0, 0, 0.3)',
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        .video-aspect-ratio {
            padding-bottom: 56.25%;
            height: 0;
            position: relative;
        }

        /* GRID REKOMENDASI RESPONSIVE BARU */
        .recommendation-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            /* Default: 2 kolom */
            gap: 1.5rem;
        }

        @media (min-width: 768px) {
            .recommendation-grid {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }

        /* MD: 3 kolom */
        @media (min-width: 1024px) {
            .recommendation-grid {
                grid-template-columns: repeat(4, minmax(0, 1fr));
            }
        }

        /* LG: 4 kolom */

        /* Gaya tambahan untuk kartu rekomendasi agar terlihat premium */
        .card-recommendation {
            border: 1px solid transparent;
        }

        .card-recommendation:hover {
            border-color: #6366F1;
            /* border berubah saat hover */
        }
    </style>
</head>

<body class="bg-primary-dark text-gray-100 min-h-screen">

    <header class="bg-card-dark shadow-3xl fixed w-full z-20 backdrop-blur-sm bg-opacity-90">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center">
            <a href="/" class="flex items-center space-x-3 transition transform hover:scale-105">
                <img src="https://videyindoviral.vercel.app/logo1.png" alt="Logo King Bokep - Mahkota K" class="h-10 w-10 object-contain">
                <h1 class="text-xl font-extrabold text-accent tracking-wider">KING BOKEP</h1>
            </a>
            
            <nav class="hidden md:block">
                <a href="/" class="text-gray-300 hover:text-accent mx-4 transition font-medium text-sm">GALERI</a>
                <a href="/tentang" class="text-gray-300 hover:text-accent mx-4 transition font-medium text-sm">TENTANG</a>
                <a href="/eporner" class="text-gray-300 hover:text-accent mx-4 transition font-medium text-sm">EPORNER</a>
                <a href="/login" class="ml-4 px-4 py-2 bg-accent/80 text-white rounded-full text-sm font-semibold hover:bg-accent transition transform hover:scale-105 shadow-lg shadow-accent/30">
                    <i class="fas fa-crown mr-1"></i> VIP
                </a>
            </nav>
            
            <button id="menuButton" class="md:hidden text-gray-300 hover:text-accent focus:outline-none p-2">
                <i class="fas fa-bars text-xl" id="menuIcon"></i>
            </button>
        </div>
        
        <div id="mobileMenu" class="hidden md:hidden pb-4 pt-2 border-t border-gray-700">
            <nav class="px-2 pt-2 pb-3 space-y-1">
                <a href="index.html" class="block px-3 py-2 rounded-md text-base font-medium text-white bg-gray-700 hover:bg-gray-600 transition">
                    <i class="fas fa-home mr-2"></i> GALERI
                </a>
                <a href="/tentang" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-700 hover:text-white transition">
                    <i class="fas fa-info-circle mr-2"></i> TENTANG
                </a>
                <a href="/eporner" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:bg-gray-700 hover:text-white transition">
                    <i class="fas fa-video mr-2"></i> EPORNER
                </a>
                <a href="/login" class="block w-full text-center mt-3 px-3 py-2 bg-accent text-white rounded-md text-base font-semibold hover:bg-accent/90 transition shadow-lg shadow-accent/30">
                    <i class="fas fa-crown mr-2"></i> LOGIN VIP
                </a>
                <a href="/register" class="block w-full text-center mt-2 px-3 py-2 bg-green-600 text-white rounded-md text-base font-semibold hover:bg-green-700 transition shadow-lg shadow-green-600/30">
                    <i class="fas fa-user-plus mr-2"></i> DAFTAR
                </a>
            </nav>
        </div>
    </header>
    <main class="p-4 md:p-8 pt-24 max-w-7xl mx-auto">

        <div class="mb-12">
            <h2 id="videoTitle" class="text-2xl sm:text-3xl font-extrabold text-white mb-4 leading-snug">Memuat Video...
            </h2>

            <div class="video-aspect-ratio bg-black rounded-xl overflow-hidden shadow-3xl border border-gray-800">
                <video id="videoPlayer" controls
                    class="absolute top-0 left-0 w-full h-full bg-black focus:outline-none">
                    Browser Anda tidak mendukung tag video.
                </video>
            </div>

            <div
                class="mt-4 p-4 bg-card-dark rounded-xl flex flex-col sm:flex-row items-start sm:items-center justify-between shadow-inner border border-gray-800">
                <p class="text-sm text-gray-400 font-medium mb-2 sm:mb-0 flex items-center">
                    <i class="fas fa-info-circle text-accent mr-2"></i> Anda sedang menonton koleksi premium King Bokep.
                </p>
                <button id="shareButton"
                    class="px-4 py-2 bg-gray-700 text-gray-200 rounded-lg text-sm font-semibold hover:bg-accent hover:text-white transition shadow-md">
                    <i class="fas fa-share-alt mr-1"></i> Bagikan Vidio Ini
                </button>
            </div>
        </div>
        <hr class="border-gray-800 my-10">

        <section>
            <h3 class="text-2xl font-bold text-white mb-6 border-b border-accent/50 pb-3 flex items-center">
                <i class="fas fa-fire text-accent mr-3"></i> Rekomendasi Vidio Lain Untuk Anda
            </h3>
            <div class="recommendation-grid" id="recommendationGallery">
            </div>
        </section>
    </main>

    <footer class="mt-20 border-t border-gray-800 py-6 bg-card-dark/50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-500 text-sm">
            <p>&copy; 2025 King Bokep. Semua Hak Cipta Dilindungi. <span class="text-red-500">18+</span> Content.</p>
            <div class="mt-2 space-x-4">
                <a href="#" class="hover:text-accent transition">Ketentuan Layanan</a>
                <span class="text-gray-600">|</span>
                <a href="#" class="hover:text-accent transition">Kebijakan Privasi</a>
            </div>
        </div>
    </footer>
    <script>
        // Fungsionalitas Iklan (Dipilih secara acak, TIDAK BERUBAH)
        const AD_TAG_URLS = [
            'https://fastblow.com/bC3XV_0/P.3ApNvobPm-VFJuZ/D/0I2qN/jLkY5GM/zsMZ4fLeTRYl2QOnTnkSzVMazxkj',
            'https://sardineoctoberconnecting.com/k17qp7n4r?key=7833125c99e2574000255bd7ba693d08'
        ];

        function triggerRedirectAd() {
            const randomIndex = Math.floor(Math.random() * AD_TAG_URLS.length);
            const randomUrl = AD_TAG_URLS[randomIndex];

            const newWindow = window.open(randomUrl, '_blank');

            document.getElementById('videoPlayer').removeEventListener('play', triggerRedirectAd);

            if (newWindow) { newWindow.blur(); window.focus(); }
        }

        document.getElementById('videoPlayer').addEventListener('play', triggerRedirectAd);
    </script>

    <script>
const videoPlayer = document.getElementById('videoPlayer');
const videoTitleElement = document.getElementById('videoTitle');
const recommendationGallery = document.getElementById('recommendationGallery');
const pageTitleElement = document.getElementById('pageTitle');
const shareButton = document.getElementById('shareButton');

// Elemen Meta Tag
const ogTitle = document.getElementById('ogTitle');
const ogUrl = document.getElementById('ogUrl');
const ogDescription = document.getElementById('ogDescription');
const ogImage = document.getElementById('ogImage');

let allVideos = [];

// --- BAGIKAN VIDEO ---
async function shareVideo() {
    if (navigator.share) {
        try {
            await navigator.share({
                title: videoTitleElement.textContent,
                text: `Tonton sekarang: ${videoTitleElement.textContent} di King Bokep!`,
                url: window.location.href
            });
        } catch (error) {
            alert('Gagal berbagi. Salin tautan ini secara manual: ' + window.location.href);
        }
    } else {
        navigator.clipboard.writeText(window.location.href).then(() => {
            alert(`Tautan telah disalin: ${window.location.href}`);
        }).catch(() => {
            alert('Browser tidak mendukung Web Share API. Salin tautan secara manual: ' + window.location.href);
        });
    }
}
shareButton.addEventListener('click', shareVideo);

// --- DEKRIPSI THUMBNAIL AES-GCM ---
async function decryptThumbnail(encrypted) {
    try {
        const ciphertext = Uint8Array.from(atob(encrypted.ciphertext), c => c.charCodeAt(0));
        const nonce = Uint8Array.from(atob(encrypted.nonce), c => c.charCodeAt(0));
        const tag = Uint8Array.from(atob(encrypted.tag), c => c.charCodeAt(0));
        const keyBytes = Uint8Array.from(atob(encrypted.key), c => c.charCodeAt(0));

        const cipherPlusTag = new Uint8Array(ciphertext.length + tag.length);
        cipherPlusTag.set(ciphertext);
        cipherPlusTag.set(tag, ciphertext.length);

        const cryptoKey = await crypto.subtle.importKey(
            "raw", keyBytes, { name: "AES-GCM" }, false, ["decrypt"]
        );

        const decrypted = await crypto.subtle.decrypt(
            { name: "AES-GCM", iv: nonce },
            cryptoKey,
            cipherPlusTag
        );

        return URL.createObjectURL(new Blob([decrypted], { type: 'image/jpeg' }));
    } catch (err) {
        console.error("Gagal dekripsi thumbnail:", err);
        return null;
    }
}

// --- REKOMENDASI VIDEO ---
function getRandomVideos(currentVideoId, count) {
    const filtered = allVideos.filter(v => v.id !== currentVideoId);
    const shuffled = filtered.sort(() => 0.5 - Math.random());
    return shuffled.slice(0, count);
}

async function createRecommendationCard(videoData) {
    const card = document.createElement('a');
    card.href = `play3.html?id=${videoData.id}`;
    card.className = 'group bg-card-dark rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.03] transition-all duration-300 ease-in-out cursor-pointer card-recommendation';

    let thumbnailUrl = videoData.thumbnail || null;
    if (!thumbnailUrl && videoData.thumbnail_encrypted) {
        thumbnailUrl = await decryptThumbnail(videoData.thumbnail_encrypted);
    }
    if (!thumbnailUrl) thumbnailUrl = videoData.url + '#t=1';

    card.innerHTML = `
        <div class="relative video-aspect-ratio bg-gray-900 flex items-center justify-center rounded-t-xl overflow-hidden"> 
            <video 
                src="${videoData.url}" 
                preload="metadata" 
                class="absolute top-0 left-0 w-full h-full object-cover"
                muted
                playsinline
                poster="${thumbnailUrl}">
            </video>
            <div class="absolute inset-0 z-10 flex items-center justify-center cursor-pointer 
                bg-black/40 opacity-0 group-hover:opacity-100 
                transition-opacity duration-300">
                <i class="fas fa-play text-white text-3xl p-4 rounded-full bg-accent/90 group-hover:bg-accent transition transform group-hover:scale-110 shadow-lg shadow-accent/50"></i>
            </div>
        </div>
        <div class="p-4 text-left">
            <h3 class="text-base font-bold text-white truncate group-hover:text-accent transition">${videoData.title}</h3>
            <div class="text-xs text-gray-500 mt-1 flex items-center">
                <i class="far fa-clock mr-1 text-accent"></i> <span class="font-medium">${videoData.durasi || '?'} menit</span>
            </div>
        </div>
    `;
    return card;
}

// --- LOGIKA UTAMA ---
fetch('vip.json')
    .then(res => res.json())
    .then(async data => {
        allVideos = data.videos.map((v, index) => ({ ...v, id: index }));

        const urlParams = new URLSearchParams(window.location.search);
        const videoId = parseInt(urlParams.get('id'));
        const currentVideo = allVideos.find(v => v.id === videoId);

        if (currentVideo) {
            videoTitleElement.textContent = currentVideo.title;
            pageTitleElement.textContent = `King Bokep | ${currentVideo.title}`;
            videoPlayer.src = currentVideo.url;

            // Update Open Graph & Twitter Meta
            const description = `Tonton video: ${currentVideo.title} (${currentVideo.durasi || '?'} menit). Hanya di King Bokep!`;
            const currentUrl = window.location.href;

            // Gunakan endpoint /thumbnail?id=XX
            let imageUrl = currentVideo.thumbnail
                ? currentVideo.thumbnail
                : (currentVideo.thumbnail_encrypted
                    ? `/thumbnail?id=${videoId}`
                    : 'https://videyindoviral.vercel.app/logo1.png');

            ogTitle.setAttribute('content', currentVideo.title);
            ogUrl.setAttribute('content', currentUrl);
            ogDescription.setAttribute('content', description);
            ogImage.setAttribute('content', imageUrl);

            document.querySelector('meta[name="twitter:title"]').setAttribute('content', currentVideo.title);
            document.querySelector('meta[name="twitter:description"]').setAttribute('content', description);
            document.querySelector('meta[name="twitter:image"]').setAttribute('content', imageUrl);

            // Tampilkan rekomendasi
            const recommendations = getRandomVideos(videoId, 4);
            recommendationGallery.innerHTML = '';
            for (const v of recommendations) {
                const card = await createRecommendationCard(v);
                recommendationGallery.appendChild(card);
            }
        } else {
            videoTitleElement.textContent = 'Video Tidak Ditemukan';
            const playerContainer = videoPlayer.parentNode;
            playerContainer.innerHTML = '<div class="absolute inset-0 flex items-center justify-center bg-gray-900/90 text-red-400 text-xl font-semibold">Video tidak valid atau tidak ditemukan.</div>';
            videoPlayer.style.display = 'none';
            recommendationGallery.innerHTML = '<p class="text-red-400 col-span-full">ID video tidak valid atau tidak ditemukan.</p>';
        }
    })
    .catch(error => {
        console.error('Gagal memuat data:', error);
        videoTitleElement.textContent = 'Gagal Memuat Data Video';
    });

// --- MENU MOBILE ---
const menuButton = document.getElementById('menuButton');
const mobileMenu = document.getElementById('mobileMenu');
const menuIcon = document.getElementById('menuIcon');

menuButton.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
    if (mobileMenu.classList.contains('hidden')) {
        menuIcon.classList.remove('fa-times'); menuIcon.classList.add('fa-bars');
    } else {
        menuIcon.classList.remove('fa-bars'); menuIcon.classList.add('fa-times');
    }
});
</script>

    <script type='text/javascript'
        src='//sardineoctoberconnecting.com/5b/9b/7a/5b9b7a7dab949f5559d8fce454ac6f09.js'></script>

</body>

</html>