<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">King Bokep | Tonton Video</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-dark': '#121212',
                        'card-dark': '#1E1E1E',
                        'accent': '#6366F1', // Indigo
                    },
                    boxShadow: {
                        '3xl': '0 35px 60px -15px rgba(0, 0, 0, 0.3)',
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        .video-aspect-ratio { padding-bottom: 56.25%; height: 0; position: relative; }
        /* GRID REKOMENDASI RESPONSIVE BARU */
        .recommendation-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr)); /* Default: 2 kolom */
            gap: 1.5rem;
        }
        @media (min-width: 768px) { .recommendation-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); } } /* MD: 3 kolom */
        @media (min-width: 1024px) { .recommendation-grid { grid-template-columns: repeat(4, minmax(0, 1fr)); } } /* LG: 4 kolom */

        /* Gaya tambahan untuk kartu rekomendasi agar terlihat premium */
        .card-recommendation {
            border: 1px solid transparent;
        }
        .card-recommendation:hover {
            border-color: #6366F1; /* border berubah saat hover */
        }
    </style>
</head>

<body class="bg-primary-dark text-gray-100 min-h-screen">

    <header class="bg-card-dark shadow-3xl fixed w-full z-20 backdrop-blur-sm bg-opacity-90">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center">
            <a href="index.html" class="flex items-center space-x-3 transition transform hover:scale-105">
                <img src="https://videyindoviral.vercel.app/logo1.png" alt="Logo King Bokep - Mahkota K" class="h-10 w-10 object-contain">
                <h1 class="text-xl font-extrabold text-accent tracking-wider">KING BOKEP</h1>
            </a>
            <nav class="hidden md:block">
                <a href="index.html" class="text-gray-300 hover:text-accent mx-4 transition font-medium text-sm">GALERI</a>
                <a href="#" class="text-gray-300 hover:text-accent mx-4 transition font-medium text-sm">TENTANG</a>
                <a href="#" class="ml-4 px-4 py-2 bg-accent/80 text-white rounded-full text-sm font-semibold hover:bg-accent transition transform hover:scale-105 shadow-lg shadow-accent/30">
                    <i class="fas fa-crown mr-1"></i> VIP
                </a>
            </nav>
            <button class="md:hidden text-gray-300 hover:text-accent focus:outline-none">
                 <i class="fas fa-bars text-xl"></i>
            </button>
        </div>
    </header>
    <main class="p-4 md:p-8 pt-24 max-w-7xl mx-auto">
        
        <div class="mb-12">
             <h2 id="videoTitle" class="text-2xl sm:text-3xl font-extrabold text-white mb-4 leading-snug">Memuat Video...</h2>

            <div class="video-aspect-ratio bg-black rounded-xl overflow-hidden shadow-3xl border border-gray-800">
                <video id="videoPlayer" controls class="absolute top-0 left-0 w-full h-full bg-black focus:outline-none">
                    Browser Anda tidak mendukung tag video.
                </video>
            </div>
            
            <div class="mt-4 p-4 bg-card-dark rounded-xl flex flex-col sm:flex-row items-start sm:items-center justify-between shadow-inner border border-gray-800">
                <p class="text-sm text-gray-400 font-medium mb-2 sm:mb-0 flex items-center">
                    <i class="fas fa-info-circle text-accent mr-2"></i> Anda sedang menonton koleksi premium King Bokep.
                </p>
                <button id="shareButton" class="px-4 py-2 bg-gray-700 text-gray-200 rounded-lg text-sm font-semibold hover:bg-accent hover:text-white transition shadow-md">
                    <i class="fas fa-share-alt mr-1"></i> Bagikan Vidio Ini
                </button>
            </div>
        </div>
        <hr class="border-gray-800 my-10">

        <section>
            <h3 class="text-2xl font-bold text-white mb-6 border-b border-accent/50 pb-3 flex items-center">
                <i class="fas fa-fire text-accent mr-3"></i> Rekomendasi Vidio Lain Untuk Anda
            </h3>
            <div class="recommendation-grid" id="recommendationGallery">
                </div>
        </section>
        </main>

    <footer class="mt-20 border-t border-gray-800 py-6 bg-card-dark/50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-500 text-sm">
            <p>&copy; 2025 King Bokep. Semua Hak Cipta Dilindungi. <span class="text-red-500">18+</span> Content.</p>
            <div class="mt-2 space-x-4">
                <a href="#" class="hover:text-accent transition">Ketentuan Layanan</a>
                <span class="text-gray-600">|</span>
                <a href="#" class="hover:text-accent transition">Kebijakan Privasi</a>
            </div>
        </div>
    </footer>
    <script>
        const AD_TAG_URL_REDIRECT = 'https://fastblow.com/bC3XV_0/P.3ApNvobPm-VFJuZ/D/0I2qN/jLkY5GM/zsMZ4fLeTRYl2QOnTnkSzVMazxkj';
        
        function triggerRedirectAd() {
            // Fungsionalitas Iklan ASLI: Membuka jendela iklan baru
            const newWindow = window.open(AD_TAG_URL_REDIRECT, '_blank');
            
            // Hapus listener setelah terpicu agar hanya terpicu sekali per pemutaran
            document.getElementById('videoPlayer').removeEventListener('play', triggerRedirectAd);
            
            if (newWindow) { newWindow.blur(); window.focus(); }
        }
        
        // Logika Asli: REDIRECT IKLAN DIPERTAHANKAN PADA EVENT 'PLAY' VIDEO UTAMA SAJA
        document.getElementById('videoPlayer').addEventListener('play', triggerRedirectAd);
    </script>

    <script>
        const videoPlayer = document.getElementById('videoPlayer');
        const videoTitleElement = document.getElementById('videoTitle');
        const recommendationGallery = document.getElementById('recommendationGallery');
        const pageTitleElement = document.getElementById('pageTitle');
        const shareButton = document.getElementById('shareButton'); // Elemen tombol share baru

        let allVideos = [];

        // --- FUNGSI BAGIKAN BARU ---
        async function shareVideo() {
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: videoTitleElement.textContent,
                        text: `Tonton sekarang: ${videoTitleElement.textContent} di King Bokep!`,
                        url: window.location.href
                    });
                } catch (error) {
                    console.error('Gagal berbagi:', error);
                    alert('Gagal berbagi. Salin tautan ini secara manual: ' + window.location.href);
                }
            } else {
                // Fallback untuk browser yang tidak mendukung Web Share API
                navigator.clipboard.writeText(window.location.href).then(() => {
                    alert(`Tautan telah disalin ke clipboard: ${window.location.href}`);
                }).catch(err => {
                    console.error('Gagal menyalin tautan:', err);
                    alert('Browser Anda tidak mendukung Web Share API. Salin tautan ini secara manual: ' + window.location.href);
                });
            }
        }
        
        // Tambahkan event listener ke tombol Bagikan
        shareButton.addEventListener('click', shareVideo);
        // --- AKHIR FUNGSI BAGIKAN BARU ---


        // Fungsionalitas getRandomVideos: TIDAK BERUBAH
        function getRandomVideos(currentVideoId, count) {
            const filteredVideos = allVideos.filter(v => v.id !== currentVideoId);
            const shuffled = filteredVideos.sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        // Fungsionalitas Pembuatan Kartu Rekomendasi: TAMPILAN SAJA DIUBAH
        function createRecommendationCard(videoData) {
            const card = document.createElement('a');
            
            card.href = `play.html?id=${videoData.id}`; 

            card.className = 'group bg-card-dark rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.03] transition-all duration-300 ease-in-out cursor-pointer card-recommendation';

            // HTML Kartu Diperbarui TAMPILAN
            card.innerHTML = `
                <div class="relative video-aspect-ratio bg-gray-900 flex items-center justify-center rounded-t-xl overflow-hidden"> 
                    <video 
                        src="${videoData.url}" 
                        preload="metadata" 
                        class="absolute top-0 left-0 w-full h-full object-cover"
                        muted
                        playsinline>
                        Browser Anda tidak mendukung tag video.
                    </video>
                    
                    <div class="absolute inset-0 z-10 flex items-center justify-center cursor-pointer 
                        bg-black/40 opacity-0 group-hover:opacity-100 
                        transition-opacity duration-300">
                        <i class="fas fa-play text-white text-3xl p-4 rounded-full bg-accent/90 group-hover:bg-accent transition transform group-hover:scale-110 shadow-lg shadow-accent/50"></i>
                    </div>
                </div>
                <div class="p-4 text-left">
                    <h3 class="text-base font-bold text-white truncate group-hover:text-accent transition">${videoData.title}</h3>
                    <div class="text-xs text-gray-500 mt-1 flex items-center">
                        <i class="far fa-clock mr-1 text-accent"></i> <span class="font-medium">${videoData.duration || '?'} menit</span>
                    </div>
                </div>
            `;
            return card;
        }


        // --- LOGIKA UTAMA PEMUTAR (TIDAK BERUBAH) ---
        fetch('videos.json')
            .then(res => res.json())
            .then(data => {
                allVideos = data.videos.map((v, index) => ({ ...v, id: index }));

                const urlParams = new URLSearchParams(window.location.search);
                const videoId = parseInt(urlParams.get('id'));

                const currentVideo = allVideos.find(v => v.id === videoId);

                if (currentVideo) {
                    videoTitleElement.textContent = currentVideo.title;
                    pageTitleElement.textContent = `King Bokep | ${currentVideo.title}`;
                    
                    videoPlayer.src = currentVideo.url;
                    videoPlayer.preload = 'metadata';
                    videoPlayer.removeAttribute('poster'); 

                    const recommendations = getRandomVideos(videoId, 4); 
                    
                    recommendationGallery.innerHTML = '';
                    if (recommendations.length > 0) {
                        recommendations.forEach(v => {
                            const card = createRecommendationCard(v);
                            recommendationGallery.appendChild(card);
                        });
                    } else {
                        recommendationGallery.innerHTML = '<p class="text-gray-400 col-span-full">Tidak ada video rekomendasi lain.</p>';
                    }

                } else {
                    videoTitleElement.textContent = 'Video Tidak Ditemukan';
                    // Pemberian pesan error yang lebih jelas di area player
                    const playerContainer = videoPlayer.parentNode;
                    playerContainer.innerHTML = '<div class="absolute inset-0 flex items-center justify-center bg-gray-900/90 text-red-400 text-xl font-semibold">Video tidak valid atau tidak ditemukan.</div>';
                    videoPlayer.style.display = 'none';
                    recommendationGallery.innerHTML = '<p class="text-red-400 col-span-full">ID video tidak valid atau tidak ditemukan.</p>';
                }
            })
            .catch(error => {
                console.error('Gagal memuat data:', error);
                videoTitleElement.textContent = 'Gagal Memuat Data Video';
            });
    </script>
</body>

</html>